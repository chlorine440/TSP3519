#include "TSP_TFT18.h"
#include "tsp_isr.h"

// Menu Cursor bitmap, 16*16
//const uint8_t menu_cursor1[]={
const uint8_t menu_cursor1[]={
    0x80,0x00,0x80,0x01,0x80,0x03,0x80,0x07,
    0xFF,0x0F,0xFF,0x1F,0xFF,0x3F,0xFF,0x7F,
    0xFF,0xFF,0xFF,0x7F,0xFF,0x3F,0xFF,0x1F,
    0xFF,0x0F,0x80,0x07,0x80,0x03,0x80,0x01,
};

/* (8 X 16 , Cascadian Code SemiBold2 )*/
const uint8_t tft_ascii[][16]={
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*" ",0*/
	{0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x18,0x18,0x18,0x00,0x18,0x18,0x00,0x00,0x00},/*"!",1*/
	{0x00,0x00,0x00,0x00,0x00,0x6C,0x6C,0x6C,0x6C,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*""",2*/
	{0x00,0x00,0x00,0x00,0x00,0x6C,0x2C,0x7E,0x24,0x24,0x7E,0x34,0x36,0x00,0x00,0x00},/*"#",3*/
	{0x00,0x00,0x00,0x18,0x18,0x7C,0x26,0x06,0x1C,0x70,0x60,0x62,0x3E,0x18,0x00,0x00},/*"$",4*/
	{0x00,0x00,0x00,0x00,0x00,0x0E,0x1B,0xEE,0x18,0x7F,0xD2,0xD0,0x70,0x00,0x00,0x00},/*"%",5*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x06,0x0C,0x5E,0x73,0x73,0xDE,0x00,0x00,0x00},/*"&",6*/
	{0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"'",7*/
	{0x00,0x00,0x00,0x00,0x70,0x18,0x0C,0x0C,0x04,0x04,0x0C,0x0C,0x18,0x70,0x00,0x00},/*"(",8*/
	{0x00,0x00,0x00,0x00,0x0E,0x18,0x30,0x30,0x20,0x20,0x30,0x30,0x18,0x0E,0x00,0x00},/*")",9*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x5A,0x7E,0x3C,0x66,0x00,0x00,0x00,0x00,0x00},/*"*",10*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x18,0x7E,0x18,0x18,0x00,0x00,0x00,0x00},/*"+",11*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x08,0x08},/*",",12*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"-",13*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00},/*".",14*/
	{0x00,0x00,0x00,0x00,0xC0,0x60,0x20,0x30,0x10,0x18,0x0C,0x0C,0x06,0x06,0x00,0x00},/*"/",15*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x66,0x5A,0x5A,0x66,0x66,0x3C,0x00,0x00,0x00},/*"0",16*/
	{0x00,0x00,0x00,0x00,0x00,0x1C,0x1E,0x18,0x18,0x18,0x18,0x18,0x7E,0x00,0x00,0x00},/*"1",17*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x60,0x60,0x30,0x18,0x0E,0x7E,0x00,0x00,0x00},/*"2",18*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x60,0x1C,0x38,0x60,0x62,0x3E,0x00,0x00,0x00},/*"3",19*/
	{0x00,0x00,0x00,0x00,0x00,0x64,0x66,0x66,0x66,0x62,0xFE,0x61,0x60,0x00,0x00,0x00},/*"4",20*/
	{0x00,0x00,0x00,0x00,0x00,0x7C,0x06,0x06,0x3E,0x62,0x40,0x66,0x3C,0x00,0x00,0x00},/*"5",21*/
	{0x00,0x00,0x00,0x00,0x00,0x78,0x1C,0x06,0x7E,0x66,0x42,0x66,0x3C,0x00,0x00,0x00},/*"6",22*/
	{0x00,0x00,0x00,0x00,0x00,0xFE,0x62,0x62,0x20,0x30,0x30,0x10,0x18,0x00,0x00,0x00},/*"7",23*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x66,0x18,0x66,0x42,0x66,0x3C,0x00,0x00,0x00},/*"8",24*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x42,0x66,0x5E,0x60,0x38,0x1E,0x00,0x00,0x00},/*"9",25*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x18,0x18,0x00,0x00,0x00},/*":",26*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x18,0x18,0x08,0x08},/*";",27*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x7C,0x07,0x0F,0x78,0x40,0x00,0x00,0x00,0x00},/*"<",28*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x00,0x00,0x7E,0x00,0x00,0x00,0x00,0x00},/*"=",29*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x3E,0xE0,0xF0,0x1E,0x02,0x00,0x00,0x00,0x00},/*">",30*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x60,0x30,0x18,0x00,0x18,0x18,0x00,0x00,0x00},/*"?",31*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x5A,0x6A,0x4A,0x4A,0x7A,0x06,0x3C,0x00,0x00},/*"@",32*/
	{0x00,0x00,0x00,0x00,0x00,0x18,0x3C,0x3C,0x24,0x66,0x7E,0x42,0xC3,0x00,0x00,0x00},/*"A",33*/
	{0x00,0x00,0x00,0x00,0x00,0x3E,0x66,0x66,0x1E,0x66,0xC6,0xE6,0x7E,0x00,0x00,0x00},/*"B",34*/
	{0x00,0x00,0x00,0x00,0x00,0xFC,0x4E,0x06,0x03,0x02,0x06,0x8E,0x7C,0x00,0x00,0x00},/*"C",35*/
	{0x00,0x00,0x00,0x00,0x00,0x3E,0x62,0x42,0xC2,0xC2,0x42,0x62,0x3E,0x00,0x00,0x00},/*"D",36*/
	{0x00,0x00,0x00,0x00,0x00,0x7E,0x06,0x06,0x3E,0x06,0x06,0x06,0x7E,0x00,0x00,0x00},/*"E",37*/
	{0x00,0x00,0x00,0x00,0x00,0xFE,0x06,0x06,0x06,0x3E,0x06,0x06,0x06,0x00,0x00,0x00},/*"F",38*/
	{0x00,0x00,0x00,0x00,0x00,0x7C,0xC6,0x02,0x03,0x73,0x42,0x46,0x7C,0x00,0x00,0x00},/*"G",39*/
	{0x00,0x00,0x00,0x00,0x00,0x42,0x42,0x42,0x7E,0x42,0x42,0x42,0x42,0x00,0x00,0x00},/*"H",40*/
	{0x00,0x00,0x00,0x00,0x00,0x7E,0x18,0x18,0x18,0x18,0x18,0x18,0x7E,0x00,0x00,0x00},/*"I",41*/
	{0x00,0x00,0x00,0x00,0x00,0x78,0x40,0x40,0x40,0x40,0x43,0x66,0x3C,0x00,0x00,0x00},/*"J",42*/
	{0x00,0x00,0x00,0x00,0x00,0x46,0x46,0x66,0x36,0x3E,0x36,0x66,0xC6,0x00,0x00,0x00},/*"K",43*/
	{0x00,0x00,0x00,0x00,0x00,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x7E,0x00,0x00,0x00},/*"L",44*/
	{0x00,0x00,0x00,0x00,0x00,0x66,0x56,0x5A,0x5A,0x5A,0x42,0x42,0x42,0x00,0x00,0x00},/*"M",45*/
	{0x00,0x00,0x00,0x00,0x00,0x46,0x4E,0x4A,0x4A,0x52,0x52,0x72,0x62,0x00,0x00,0x00},/*"N",46*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x42,0xC3,0xC3,0x42,0x66,0x3C,0x00,0x00,0x00},/*"O",47*/
	{0x00,0x00,0x00,0x00,0x00,0x3E,0x66,0xC6,0x66,0x7E,0x06,0x06,0x06,0x00,0x00,0x00},/*"P",48*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x42,0xC3,0xC3,0x42,0x66,0x7E,0x18,0x18,0x70},/*"Q",49*/
	{0x00,0x00,0x00,0x00,0x00,0x3E,0x62,0x42,0x62,0x7E,0x32,0x62,0xC2,0x00,0x00,0x00},/*"R",50*/
	{0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x06,0x1C,0x38,0x60,0x62,0x3E,0x00,0x00,0x00},/*"S",51*/
	{0x00,0x00,0x00,0x00,0x00,0xFF,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x00,0x00,0x00},/*"T",52*/
	{0x00,0x00,0x00,0x00,0x00,0x42,0x42,0x42,0x42,0x42,0x42,0x66,0x3C,0x00,0x00,0x00},/*"U",53*/
	{0x00,0x00,0x00,0x00,0x00,0xC3,0x42,0x66,0x66,0x24,0x3C,0x3C,0x18,0x00,0x00,0x00},/*"V",54*/
	{0x00,0x00,0x00,0x00,0x00,0xC3,0xC3,0xDB,0x5A,0x5A,0x5A,0x5A,0x66,0x00,0x00,0x00},/*"W",55*/
	{0x00,0x00,0x00,0x00,0x00,0xE7,0x66,0x3C,0x18,0x18,0x3C,0x66,0xE7,0x00,0x00,0x00},/*"X",56*/
	{0x00,0x00,0x00,0x00,0x00,0xC3,0x66,0x24,0x3C,0x18,0x18,0x18,0x18,0x00,0x00,0x00},/*"Y",57*/
	{0x00,0x00,0x00,0x00,0x00,0x7E,0x60,0x30,0x18,0x08,0x0C,0x06,0x7E,0x00,0x00,0x00},/*"Z",58*/
	{0x00,0x00,0x00,0x00,0x7C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x7C,0x00,0x00},/*"[",59*/
	{0x00,0x00,0x00,0x00,0x03,0x06,0x04,0x0C,0x08,0x18,0x30,0x30,0x60,0x60,0x00,0x00},/*"\",60*/
	{0x00,0x00,0x00,0x00,0x3E,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x3E,0x00,0x00},/*"]",61*/
	{0x00,0x00,0x00,0x00,0x18,0x18,0x3C,0x66,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"^",62*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x00,0x00},/*"_",63*/
	{0x00,0x00,0x00,0x00,0x0C,0x18,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"`",64*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x60,0x7C,0x62,0x62,0xFE,0x00,0x00,0x00},/*"a",65*/
	{0x00,0x00,0x00,0x00,0x00,0x06,0x06,0x3E,0x66,0x46,0x46,0x66,0x3E,0x00,0x00,0x00},/*"b",66*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x66,0x06,0x06,0x06,0x7C,0x00,0x00,0x00},/*"c",67*/
	{0x00,0x00,0x00,0x00,0x00,0x60,0x60,0x7C,0x66,0x62,0x62,0x66,0x7C,0x00,0x00,0x00},/*"d",68*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x62,0x7E,0x06,0x7C,0x00,0x00,0x00},/*"e",69*/
	{0x00,0x00,0x00,0x00,0x00,0xF0,0x18,0x08,0x7F,0x08,0x08,0x08,0x08,0x00,0x00,0x00},/*"f",70*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x66,0x62,0x62,0x66,0x7C,0x60,0x60,0x3E},/*"g",71*/
	{0x00,0x00,0x00,0x00,0x00,0x06,0x06,0x3E,0x66,0x66,0x66,0x66,0x66,0x00,0x00,0x00},/*"h",72*/
	{0x00,0x00,0x00,0x00,0x00,0x18,0x10,0x1E,0x10,0x10,0x10,0x10,0x7E,0x00,0x00,0x00},/*"i",73*/
	{0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x3C,0x30,0x30,0x30,0x30,0x30,0x30,0x38,0x1E},/*"j",74*/
	{0x00,0x00,0x00,0x00,0x00,0x06,0x06,0x66,0x66,0x36,0x3E,0x26,0xE6,0x00,0x00,0x00},/*"k",75*/
	{0x00,0x00,0x00,0x00,0x00,0x0E,0x08,0x08,0x08,0x08,0x08,0x58,0x78,0x00,0x00,0x00},/*"l",76*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x5A,0x5A,0x5A,0x5A,0x5A,0x00,0x00,0x00},/*"m",77*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x66,0x66,0x66,0x66,0x66,0x00,0x00,0x00},/*"n",78*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x66,0x66,0x66,0x66,0x3C,0x00,0x00,0x00},/*"o",79*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x66,0x46,0x46,0x66,0x3E,0x06,0x06,0x06},/*"p",80*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x66,0x62,0x62,0x66,0x7C,0x60,0x60,0x60},/*"q",81*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x76,0xCC,0x0C,0x0C,0x0C,0x1F,0x00,0x00,0x00},/*"r",82*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x06,0x1E,0x70,0x60,0x3E,0x00,0x00,0x00},/*"s",83*/
	{0x00,0x00,0x00,0x00,0x00,0x0C,0x0C,0x7F,0x0C,0x0C,0x0C,0x0C,0x78,0x00,0x00,0x00},/*"t",84*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x66,0x66,0x66,0x66,0x66,0xFC,0x00,0x00,0x00},/*"u",85*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC3,0x66,0x66,0x24,0x3C,0x18,0x00,0x00,0x00},/*"v",86*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xDB,0x5A,0x5A,0x5A,0x56,0x66,0x00,0x00,0x00},/*"w",87*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x66,0x3C,0x18,0x18,0x3C,0x66,0x00,0x00,0x00},/*"x",88*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC3,0x66,0x66,0x24,0x3C,0x18,0x18,0x0F,0x03},/*"y",89*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x20,0x10,0x0C,0x06,0x7E,0x00,0x00,0x00},/*"z",90*/
	{0x00,0x00,0x00,0x00,0x70,0x18,0x10,0x10,0x0C,0x18,0x10,0x18,0x18,0x70,0x00,0x00},/*"{",91*/
	{0x00,0x00,0x00,0x00,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x00},/*"|",92*/
	{0x00,0x00,0x00,0x00,0x0E,0x18,0x18,0x08,0x30,0x18,0x08,0x18,0x18,0x0E,0x00,0x00},/*"}",93*/
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x4E,0x72,0x00,0x00,0x00,0x00,0x00,0x00},/*"~",94*/
};

void tsp_tft18_init(void)
{
	LCD_BL_ON();

	LCD_CS_HIGH();
	LCD_RST_HIGH();
	delay_1ms(5);
	LCD_RST_LOW();
	delay_1ms(5);
	LCD_RST_HIGH();
	LCD_CS_HIGH();
	delay_1ms(5);
	LCD_CS_LOW();

	tsp_tft18_write_cmd(0x11);		// Sleep out & booster on
	delay_1ms(20);

	tsp_tft18_write_cmd(0xB1);		// Frame Rate Control for normal mode
	tsp_tft18_write_byte(0x05);
	tsp_tft18_write_byte(0x3C);
	tsp_tft18_write_byte(0x3C);

	tsp_tft18_write_cmd(0xB2);		// Frame Rate Control for idle mode
	tsp_tft18_write_byte(0x05);
	tsp_tft18_write_byte(0x3C);
	tsp_tft18_write_byte(0x3C);

	tsp_tft18_write_cmd(0xB3);		// Frame Rate Control for  partial mode + full colors
	tsp_tft18_write_byte(0x05);
	tsp_tft18_write_byte(0x3C);
	tsp_tft18_write_byte(0x3C);
	tsp_tft18_write_byte(0x05);
	tsp_tft18_write_byte(0x3C);
	tsp_tft18_write_byte(0x3C);

	tsp_tft18_write_cmd(0xB4);		// Display Inversion Control
	tsp_tft18_write_byte(0x03);		// Frame inversion

	tsp_tft18_write_cmd(0x3A);		// Interface pixel format
	tsp_tft18_write_byte(0x05);		// Interface format: 16-bit pixel; use "0x55" when writing 16-bit data

	tsp_tft18_write_cmd(0x20);		// Display inversion off
	tsp_tft18_write_cmd(0x13);		// Partial mode off

	tsp_tft18_write_cmd(0x26);		// Gamma curve select   		  	
	tsp_tft18_write_byte(0x01);		// 1,2,4,8

	tsp_tft18_write_cmd(0x29);		// Display on

	tsp_tft18_write_cmd(0x36);		// Memory Data Access Control: MX, MY, RGB mode 
	tsp_tft18_write_byte(0x70);		// HSP-GD4 

	tsp_tft18_clear(BLACK);
}

static uint8_t tsp_spi_write_byte(uint8_t dat)
{
	DL_SPI_transmitDataBlocking8(LCD_INST, dat);
	return DL_SPI_receiveDataBlocking8(LCD_INST);
} 

void tsp_tft18_write_cmd(uint8_t dat)
{
	LCD_DC_LOW();
	tsp_spi_write_byte(dat);
}

void tsp_tft18_write_byte(uint8_t dat)
{
	LCD_DC_HIGH();
	tsp_spi_write_byte(dat);
}

void tsp_tft18_write_2byte(uint16_t dat)
{
	LCD_DC_HIGH();
	tsp_spi_write_byte(dat>>8);
	tsp_spi_write_byte(dat);
}

void tsp_tft18_set_region(uint16_t x0, uint16_t y0, uint16_t x1, uint16_t y1)
{	
	tsp_tft18_write_cmd(0x2A);
	tsp_tft18_write_2byte(x0);
	tsp_tft18_write_2byte(x1);

	tsp_tft18_write_cmd(0x2B);
	tsp_tft18_write_2byte(y0);
	tsp_tft18_write_2byte(y1);

	tsp_tft18_write_cmd(0x2C);
}

void tsp_tft18_clear(uint16_t Color)
{	
    uint16_t i, m;
	
    tsp_tft18_set_region(0, 0, TFT_X_MAX-1, TFT_Y_MAX-1);
	
    for(i=0; i<TFT_X_MAX; i++)
        for(m=0; m<TFT_Y_MAX; m++)
        {	
            tsp_tft18_write_2byte(Color);
        }   
}

void tsp_tft18_set_xy(uint16_t x, uint16_t y)
{
	tsp_tft18_set_region(x, y, x, y);
}

void tsp_tft18_draw_pixel(uint16_t x, uint16_t y, uint16_t color)
{
	tsp_tft18_set_region(x, y, x, y);
	tsp_tft18_write_2byte(color);
}

void tsp_tft18_test_color(void)
{
	uint8_t i=1;
	tsp_tft18_clear(BLUE);
	
	delay_1ms(200);

	while(i--)
	{
		tsp_tft18_clear(WHITE);
        delay_1ms(200);
		tsp_tft18_clear(BLACK);
        delay_1ms(200);
		tsp_tft18_clear(RED);
        delay_1ms(200);
	  	tsp_tft18_clear(GREEN);
        delay_1ms(200);
	  	tsp_tft18_clear(BLUE);
        delay_1ms(200);
	}		
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_char(uint16_t x, uint16_t y, uint8_t data)
{
    uint8_t i,j;
    uint8_t temp;
	
    for(i=0; i<16; i++)
    {
        tsp_tft18_set_region(x, y+i, x+7, y+i);
        temp = tft_ascii[data-32][i];
        for(j=0; j<8; j++)
        {
            if(temp & 0x01)
                tsp_tft18_write_2byte(WHITE);
            else
                tsp_tft18_write_2byte(BLACK);
				temp>>=1;
        }
    }
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_char_color(uint16_t x, uint16_t y, uint8_t data, uint16_t fcolor, uint16_t bcolor)
{
    uint8_t i,j;
    uint8_t temp;
	
    for(i=0; i<16; i++)
    {
        tsp_tft18_set_region(x, y+i, x+7, y+i);
        temp = tft_ascii[data-32][i];
        for(j=0; j<8; j++)
        {
            if(temp & 0x01)
                tsp_tft18_write_2byte(fcolor);
            else
                tsp_tft18_write_2byte(bcolor);
				temp>>=1;
        }
    }
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_str(uint16_t x, uint16_t y, uint8_t data[])
{
    uint8_t i=0;
	
    while(data[i] != '\0')
    {
		tsp_tft18_show_char(x+8*i, y*16, data[i]);
		i++;
    }
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_str_color(uint16_t x, uint16_t y, uint8_t data[], uint16_t fcolor, uint16_t bcolor)
{
    uint8_t i=0;
	
    while(data[i] != '\0')
    {
		tsp_tft18_show_char_color(x+8*i, y*16, data[i], fcolor, bcolor);
		i++;
    }
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_int8(uint16_t x, uint16_t y, int8_t data)
{
    uint8_t a[3];
    uint8_t i;
    if(data < 0)
    {
        tsp_tft18_show_char(x, y*16, '-');
        data = -data;
    }
    else
        tsp_tft18_show_char(x, y*16, ' ');
	
    a[0] = data/100;
    a[1] = data/10%10;
    a[2] = data%10;
    i = 0;
    while(i<3)
    {
        tsp_tft18_show_char(x+(8*(i+1)), y*16, '0'+a[i]);
        i++;
    }
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_int8_color(uint16_t x, uint16_t y, int8_t data, uint16_t fcolor, uint16_t bcolor)
{
    uint8_t a[3];
    uint8_t i;
    if(data < 0)
    {
        tsp_tft18_show_char_color(x, y*16, '-', fcolor, bcolor);
        data = -data;
    }
    else
        tsp_tft18_show_char_color(x, y*16, ' ', fcolor, bcolor);
	
    a[0] = data/100;
    a[1] = data/10%10;
    a[2] = data%10;
    i = 0;
    while(i<3)
    {
        tsp_tft18_show_char_color(x+(8*(i+1)), y*16, '0'+a[i], fcolor, bcolor);
        i++;
    }
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_uint8(uint16_t x, uint16_t y, uint8_t data)
{
    uint8_t a[3];
    uint8_t i;
	
    a[0] = data/100;
    a[1] = data/10%10;
    a[2] = data%10;
    i = 0;
    while(i<3)
    {
        tsp_tft18_show_char(x+(8*(i+1)), y*16, '0'+a[i]);
        i++;
    }
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_uint8_color(uint16_t x, uint16_t y, uint8_t data, uint16_t fcolor, uint16_t bcolor)
{
    uint8_t a[3];
    uint8_t i;
	
    a[0] = data/100;
    a[1] = data/10%10;
    a[2] = data%10;
    i = 0;
    while(i<3)
    {
        tsp_tft18_show_char_color(x+(8*(i+1)), y*16, '0'+a[i], fcolor, bcolor);
        i++;
    }

}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_int16(uint16_t x, uint16_t y, int16_t data)
{
    uint8_t a[5];
    uint8_t i;
    if(data < 0)
    {
        tsp_tft18_show_char(x, y*16, '-');
        data = -data;
    }
    else
        tsp_tft18_show_char(x, y*16, ' ');
	
    a[0] = data/10000;
    a[1] = data/1000%10;
    a[2] = data/100%10;
    a[3] = data/10%10;
    a[4] = data%10;
    i = 0;
    while(i<5)
    {
        tsp_tft18_show_char(x+(8*(i+1)), y*16, '0'+a[i]);
        i++;
    }
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_int16_color(uint16_t x, uint16_t y, int16_t data, uint16_t fcolor, uint16_t bcolor)
{
    uint8_t a[5];
    uint8_t i;
    if(data < 0)
    {
        tsp_tft18_show_char(x, y*16, '-');
        data = -data;
    }
    else
        tsp_tft18_show_char(x, y*16, ' ');
	
    a[0] = data/10000;
    a[1] = data/1000%10;
    a[2] = data/100%10;
    a[3] = data/10%10;
    a[4] = data%10;
    i = 0;
    while(i<5)
    {
        tsp_tft18_show_char_color(x+(8*(i+1)), y*16, '0'+a[i], fcolor, bcolor);
        i++;
    }
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_uint16(uint16_t x, uint16_t y, uint16_t data)
{
    uint8_t a[5];
    uint8_t i;
	
    a[0] = data/10000;
    a[1] = data/1000%10;
    a[2] = data/100%10;
    a[3] = data/10%10;
    a[4] = data%10;

	i = 0;
    while(i<5)
    {
        tsp_tft18_show_char(x+(8*(i+1)), y*16, '0'+a[i]);
        i++;
    }
}

// x: count by dot (0~159), y: count by line (16 dots per line)
void tsp_tft18_show_uint16_color(uint16_t x, uint16_t y, uint16_t data, uint16_t fcolor, uint16_t bcolor)
{
    uint8_t a[5];
    uint8_t i;
	
    a[0] = data/10000;
    a[1] = data/1000%10;
    a[2] = data/100%10;
    a[3] = data/10%10;
    a[4] = data%10;
	
    i = 0;
    while(i<5)
    {
        tsp_tft18_show_char_color(x+(8*(i+1)), y*16, '0'+a[i], fcolor, bcolor);
        i++;
    }
}

void tsp_tft18_draw_line_h(uint16_t x_start, uint16_t y_start, uint16_t length, uint16_t color)
{
    uint8_t i = 0;

    if(((x_start+length)>TFT_X_MAX) || (x_start>(TFT_X_MAX-1)) || (y_start>(TFT_Y_MAX-1)))
        return;

    for(i=0; i<length; i++)
        tsp_tft18_draw_pixel(x_start+i, y_start, color);
}

void tsp_tft18_draw_line_v(uint16_t x_start, uint16_t y_start, uint16_t length, uint16_t color)
{
    uint8_t i = 0;

    if(((y_start+length)>TFT_Y_MAX) || (x_start>(TFT_X_MAX-1)) || (y_start>(TFT_Y_MAX-1)))
        return;

    for(i=0; i<length; i++)
        tsp_tft18_draw_pixel(x_start, y_start+i, color);
}

void tsp_tft18_draw_frame(uint8_t x_start, uint8_t y_start, uint8_t dx, uint8_t dy, uint16_t color)
{
    if(((x_start+dx)>TFT_X_MAX) || ((y_start+dy)>TFT_Y_MAX) || \
        (x_start>(TFT_X_MAX-1)) || (y_start>(TFT_Y_MAX-1)))
		return;

    tsp_tft18_draw_line_h(x_start, y_start, dx, color);
	tsp_tft18_draw_line_h(x_start, y_start+dy, dx, color);
    tsp_tft18_draw_line_v(x_start, y_start, dy, color);
	tsp_tft18_draw_line_v(x_start+dx, y_start, dy, color);
}

void tsp_tft18_draw_block(uint8_t x_start, uint8_t y_start, uint8_t dx, uint8_t dy, uint16_t color)
{
    uint8_t i, j;
    
    if(((x_start+dx)>TFT_X_MAX) || ((y_start+dy)>TFT_Y_MAX) || \
        (x_start>(TFT_X_MAX-1)) || (y_start>(TFT_Y_MAX-1)))
		return;

    for(i=0; i<dy; i++)
    {
        for(j=0; j<dx; j++)
        {
            tsp_tft18_set_xy(x_start+j, y_start+i);
            tsp_tft18_write_2byte(color);
        }
    }
}

// x: count by dot (0~159), line: line number (16 dots per line)
void tsp_tft18_draw_menu_cursor(uint16_t x, uint8_t line, uint16_t color)
{
	uint8_t i, j, data;
    
    for(i=0; i<16; i++)
    {
		tsp_tft18_set_region(x, line*16+i, x+16, line*16+i);
        data = menu_cursor1[i*2];
        for(j=0; j<8; j++)
        {
            if(data & 0x01)
                tsp_tft18_write_2byte(color);
            else
                tsp_tft18_write_2byte(BLACK);
            data >>= 1;
        }
        data = menu_cursor1[i*2+1];
        for(j=0; j<8; j++)
        {
            if(data & 0x01)
                tsp_tft18_write_2byte(color);
            else
                tsp_tft18_write_2byte(BLACK);
            data >>= 1;
        }
    }
}

void tsp_tft18_draw_image(const uint8_t *p)
{
    uint16_t i; 
    uint8_t picH, picL;
	
    //tsp_tft18_clear(WHITE);
	
	tsp_tft18_set_region(0, 0, TFT_X_MAX-1, TFT_Y_MAX-1);
	for(i=0; i<(TFT_X_MAX*TFT_Y_MAX); i++)
	{	
		picL = *(p+i*2);
		picH = *(p+i*2+1);				
		tsp_tft18_write_2byte(picH<<8 | picL);  						
	}	
}